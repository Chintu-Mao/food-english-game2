<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‹±è¯­ç¾é£Ÿå¤§å†’é™© | English Food Adventure</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Comic Sans MS", "å¹¼åœ†", sans-serif;
        }
        body {
            background: #f8f9fa;
            color: #333;
            line-height: 1.6;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        /* æ ‡é¢˜æ ·å¼ */
        .game-title {
            text-align: center;
            margin-bottom: 30px;
            color: #e67e22;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        .game-title h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        .game-title p {
            font-size: 1.2rem;
            color: #7f8c8d;
        }
        /* å…³å¡å¯¼èˆª */
        .level-nav {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        .level-btn {
            padding: 12px 24px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .level-btn.active {
            background: #e67e22;
            transform: scale(1.05);
        }
        .level-btn:hover {
            background: #2980b9;
        }
        /* å…³å¡å®¹å™¨ */
        .level-container {
            display: none;
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        .level-container.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* ç¬¬ä¸€å…³ï¼šç¿»ç¿»ä¹æ ·å¼ */
        .memory-game {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        .memory-card {
            height: 120px;
            perspective: 1000px;
            cursor: pointer;
        }
        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            border-radius: 8px;
        }
        .memory-card.flip .card-inner {
            transform: rotateY(180deg);
        }
        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            padding: 10px;
            text-align: center;
        }
        .card-front {
            background: #3498db;
            color: white;
            transform: rotateY(180deg);
        }
        .card-back {
            background: #e67e22;
            color: white;
            font-size: 2rem;
        }
        .score-panel {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 10px;
            background: #f1f2f6;
            border-radius: 8px;
        }
        .timer, .score {
            font-size: 1.1rem;
            font-weight: bold;
        }
        /* ç¬¬äºŒå…³ï¼šæ‹¼å†™æŒ‘æˆ˜æ ·å¼ */
        .spelling-game {
            margin-top: 20px;
        }
        .word-display {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #e67e22;
            text-align: center;
        }
        .input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .spelling-input {
            flex: 1;
            padding: 12px;
            font-size: 1.1rem;
            border: 2px solid #ddd;
            border-radius: 8px;
            outline: none;
        }
        .spelling-input:focus {
            border-color: #3498db;
        }
        .check-btn, .next-btn {
            padding: 12px 24px;
            background: #2ecc71;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
        }
        .check-btn:hover, .next-btn:hover {
            background: #27ae60;
        }
        .feedback {
            font-size: 1.2rem;
            margin-bottom: 20px;
            text-align: center;
            min-height: 2rem;
        }
        .correct {
            color: #27ae60;
        }
        .wrong {
            color: #e74c3c;
        }
        /* ç¬¬ä¸‰å…³ï¼šè¶£å‘³é—®ç­”æ ·å¼ */
        .quiz-game {
            margin-top: 20px;
        }
        .question {
            font-size: 1.3rem;
            margin-bottom: 20px;
            padding: 15px;
            background: #f1f2f6;
            border-radius: 8px;
        }
        .answer-input {
            width: 100%;
            padding: 12px;
            font-size: 1.1rem;
            border: 2px solid #ddd;
            border-radius: 8px;
            margin-bottom: 20px;
            outline: none;
        }
        .answer-input:focus {
            border-color: #3498db;
        }
        .quiz-feedback {
            font-size: 1.2rem;
            margin-bottom: 20px;
            text-align: center;
            min-height: 2rem;
        }
        /* é€šå…³æç¤º */
        .congrats {
            text-align: center;
            padding: 30px;
            background: #2ecc71;
            color: white;
            border-radius: 12px;
            margin-top: 20px;
            display: none;
        }
        .congrats.active {
            display: block;
            animation: bounce 0.5s ease;
        }
        @keyframes bounce {
            0% { transform: scale(0.8); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 768px) {
            .game-title h1 {
                font-size: 2rem;
            }
            .level-container {
                padding: 20px;
            }
            .memory-game {
                grid-template-columns: repeat(3, 1fr);
            }
            .memory-card {
                height: 100px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- æ¸¸æˆæ ‡é¢˜ -->
        <div class="game-title">
            <h1>è‹±è¯­ç¾é£Ÿå¤§å†’é™©</h1>
            <p>English Food Adventure | è½»æ¾å­¦ä¹ ç¾é£Ÿè‹±è¯­å•è¯</p>
        </div>

        <!-- å…³å¡å¯¼èˆª -->
        <div class="level-nav">
            <button class="level-btn active" data-level="1">ç¬¬ä¸€å…³ï¼šç¾é£Ÿç¿»ç¿»ä¹</button>
            <button class="level-btn" data-level="2">ç¬¬äºŒå…³ï¼šæ‹¼å†™å¤§æŒ‘æˆ˜</button>
            <button class="level-btn" data-level="3">ç¬¬ä¸‰å…³ï¼šè¶£å‘³é—®ç­”</button>
        </div>

        <!-- ç¬¬ä¸€å…³ï¼šç¾é£Ÿç¿»ç¿»ä¹ -->
        <div class="level-container active" id="level1">
            <h2>ç¬¬ä¸€å…³ï¼šç¾é£Ÿå•è¯ç¿»ç¿»ä¹</h2>
            <p>è§„åˆ™ï¼šç¿»å‡ºä¸¤å¼ å¡ç‰‡ï¼Œè¯´å‡ºå¯¹åº”çš„è‹±æ–‡å•è¯ï¼ŒåŒ¹é…æ­£ç¡®å³å¯ä¿ç•™å¡ç‰‡ï¼é™æ—¶5åˆ†é’Ÿã€‚</p>
            <div class="score-panel">
                <div class="timer">è®¡æ—¶ï¼š05:00</div>
                <div class="score">å¾—åˆ†ï¼š0</div>
            </div>
            <div class="memory-game" id="memoryGame"></div>
        </div>

        <!-- ç¬¬äºŒå…³ï¼šæ‹¼å†™å¤§æŒ‘æˆ˜ -->
        <div class="level-container" id="level2">
            <h2>ç¬¬äºŒå…³ï¼šç¾é£Ÿæ‹¼å†™å¤§æŒ‘æˆ˜</h2>
            <p>è§„åˆ™ï¼šæ ¹æ®æ˜¾ç¤ºçš„ç¾é£Ÿä¸­æ–‡åç§°ï¼Œè¾“å…¥å¯¹åº”çš„è‹±æ–‡å•è¯ï¼Œæ‹¼å†™æ­£ç¡®å¾—åˆ†ï¼</p>
            <div class="score-panel">
                <div class="score">å½“å‰å¾—åˆ†ï¼š0</div>
                <div>å‰©ä½™å•è¯ï¼š8</div>
            </div>
            <div class="spelling-game">
                <div class="word-display" id="spellingWord">è¯·ç‚¹å‡»å¼€å§‹æŒ‰é’®å¼€å§‹æ¸¸æˆ</div>
                <div class="input-group">
                    <input type="text" class="spelling-input" id="spellingInput" placeholder="è¾“å…¥è‹±æ–‡å•è¯ï¼ˆå°å†™ï¼‰">
                    <button class="check-btn" id="checkBtn">æ£€æŸ¥ç­”æ¡ˆ</button>
                    <button class="next-btn" id="nextBtn">ä¸‹ä¸€ä¸ªå•è¯</button>
                </div>
                <div class="feedback" id="spellingFeedback"></div>
            </div>
        </div>

        <!-- ç¬¬ä¸‰å…³ï¼šè¶£å‘³é—®ç­” -->
        <div class="level-container" id="level3">
            <h2>ç¬¬ä¸‰å…³ï¼šç¾é£Ÿè¶£å‘³é—®ç­”</h2>
            <p>è§„åˆ™ï¼šå›ç­”å…³äºç¾é£Ÿè‹±è¯­çš„é—®é¢˜ï¼Œç­”å¯¹å¾—åˆ†ï¼Œç­”é”™æ‰£åˆ†ï¼ç´¯è®¡5åˆ†é€šå…³ã€‚</p>
            <div class="score-panel">
                <div class="score">é—®ç­”å¾—åˆ†ï¼š0</div>
            </div>
            <div class="quiz-game">
                <div class="question" id="quizQuestion">è¯·ç‚¹å‡»å¼€å§‹æŒ‰é’®å¼€å§‹é—®ç­”</div>
                <input type="text" class="answer-input" id="quizAnswer" placeholder="è¾“å…¥ä½ çš„ç­”æ¡ˆ">
                <button class="check-btn" id="quizCheckBtn">æäº¤ç­”æ¡ˆ</button>
                <button class="next-btn" id="quizNextBtn">ä¸‹ä¸€ä¸ªé—®é¢˜</button>
                <div class="quiz-feedback" id="quizFeedback"></div>
                <div class="congrats" id="congrats">
                    <h2>ğŸ‰ æ­å–œä½ ï¼</h2>
                    <p>ä½ å·²é€šå…³æ‰€æœ‰å…³å¡ï¼Œæˆä¸ºã€Œç¾é£Ÿè‹±è¯­å°è¾¾äººã€ï¼</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ========== æ ¸å¿ƒä¿®æ­£ï¼šæ‰€æœ‰ç¾é£Ÿå•è¯æ‹¼å†™100%æ ¡éªŒ ==========
        const foodData = [
            { cn: "æ±‰å ¡", en: "hamburger", pronunciation: "/ËˆhÃ¦mbÉœËrÉ¡É™r/" }, // ä¿®æ­£ï¼šhamburger æ‹¼å†™ï¼ˆç¡®è®¤æ— é”™ï¼‰
            { cn: "ä¸‰æ˜æ²»", en: "sandwich", pronunciation: "/ËˆsÃ¦ndwÉªtÊƒ/" },
            { cn: "é¢æ¡", en: "noodles", pronunciation: "/ËˆnuËdlz/" },
            { cn: "é¥ºå­", en: "dumplings", pronunciation: "/ËˆdÊŒmplÉªÅ‹z/" },
            { cn: "æŠ«è¨", en: "pizza", pronunciation: "/ËˆpiËtsÉ™/" },
            { cn: "å¯¿å¸", en: "sushi", pronunciation: "/ËˆsuËÊƒi/" },
            { cn: "ç‚¸é¸¡", en: "fried chicken", pronunciation: "/fraÉªd ËˆtÊƒÉªkÉªn/" },
            { cn: "è–¯æ¡", en: "French fries", pronunciation: "/frentÊƒ fraÉªz/" },
            { cn: "æ˜¥å·", en: "spring roll", pronunciation: "/sprÉªÅ‹ roÊŠl/" },
            { cn: "å†°æ·‡æ·‹", en: "ice cream", pronunciation: "/aÉªs kriËm/" }
        ];

        // ========== é—®ç­”é¢˜åº“ï¼šä¿®æ­£æ±‰å ¡æ‹¼å†™ç›¸å…³æ£€æŸ¥é€»è¾‘ ==========
        const quizQuestions = [
            { 
                question: "What's your favorite food? (è¯·ç”¨è‹±æ–‡å›ç­”ï¼ŒåŒ…å«è‡³å°‘ä¸€ä¸ªç¾é£Ÿå•è¯)", 
                check: (answer) => {
                    const lowerAns = answer.toLowerCase().trim();
                    return foodData.some(f => lowerAns.includes(f.en.toLowerCase()));
                } 
            },
            { 
                question: "How do you say æŠ«è¨ in English?", 
                answer: "pizza", 
                check: (ans) => ans.toLowerCase().trim() === "pizza" 
            },
            { 
                question: "Is French fries a kind of food? (å›ç­”Yesæˆ–No)", 
                answer: "yes", 
                check: (ans) => ans.toLowerCase().trim() === "yes" 
            },
            { 
                question: "Can you spell ice cream? (é€å­—æ¯æ‹¼å‡ºï¼Œç”¨ç©ºæ ¼åˆ†éš”)", 
                answer: "i c e c r e a m", 
                check: (ans) => ans.toLowerCase().replace(/,/g, ' ').replace(/ +/g, ' ').trim() === "i c e c r e a m" 
            },
            { 
                question: "How do you say é¥ºå­ in English?", 
                answer: "dumplings", 
                check: (ans) => ans.toLowerCase().trim() === "dumplings" 
            },
            { 
                question: "Is sushi a Chinese food? (å›ç­”Yesæˆ–No)", 
                answer: "no", 
                check: (ans) => ans.toLowerCase().trim() === "no" 
            },
            { 
                question: "Can you spell hamburger? (é€å­—æ¯æ‹¼å‡ºï¼Œç”¨ç©ºæ ¼åˆ†éš”)", 
                answer: "h a m b u r g e r", // ä¿®æ­£ï¼šæ±‰å ¡æ‹¼å†™æ‹†åˆ†ï¼ˆh-a-m-b-u-r-g-e-rï¼‰
                check: (ans) => ans.toLowerCase().replace(/,/g, ' ').replace(/ +/g, ' ').trim() === "h a m b u r g e r" 
            }
        ];

        // å…³å¡åˆ‡æ¢ï¼ˆä¿®å¤åˆ‡æ¢å¡é¡¿ï¼‰
        const levelBtns = document.querySelectorAll('.level-btn');
        const levelContainers = document.querySelectorAll('.level-container');
        
        levelBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const level = btn.dataset.level;
                // åˆ‡æ¢æŒ‰é’®çŠ¶æ€
                levelBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                // åˆ‡æ¢å®¹å™¨çŠ¶æ€
                levelContainers.forEach(container => container.classList.remove('active'));
                document.getElementById(`level${level}`).classList.add('active');
            });
        });

        // ===================== ç¬¬ä¸€å…³ï¼šç¿»ç¿»ä¹ï¼ˆç»ˆæä¿®å¤ï¼‰ =====================
        const memoryGame = document.getElementById('memoryGame');
        let flippedCards = [];
        let score = 0;
        let timer = 300; // 5åˆ†é’Ÿ = 300ç§’
        let timerInterval;
        let cards = []; // å…¨å±€å¡ç‰‡æ•°ç»„

        // åˆå§‹åŒ–ç¿»ç¿»ä¹å¡ç‰‡
        function initMemoryGame() {
            // å®Œå…¨é‡ç½®æ‰€æœ‰çŠ¶æ€
            memoryGame.innerHTML = '';
            flippedCards = [];
            score = 0;
            cards = [];
            document.querySelector('#level1 .score').textContent = `å¾—åˆ†ï¼š0`;
            clearInterval(timerInterval);
            timer = 300;
            updateTimer();

            // ç”Ÿæˆä¸¤ä¸¤é…å¯¹çš„å¡ç‰‡ï¼ˆç¡®ä¿æ¯ä¸ªç¾é£Ÿæœ‰ä¸¤å¼ ï¼‰
            const foodPairs = [];
            foodData.forEach(food => {
                foodPairs.push(food);
                foodPairs.push(food);
            });
            // éšæœºæ‰“ä¹±
            const shuffledPairs = foodPairs.sort(() => Math.random() - 0.5);
            
            // åˆ›å»ºå¡ç‰‡å…ƒç´ 
            shuffledPairs.forEach((food, index) => {
                const card = document.createElement('div');
                card.className = 'memory-card';
                card.dataset.foodEn = food.en.toLowerCase(); // ç»Ÿä¸€å°å†™ï¼Œé¿å…åŒ¹é…é”™è¯¯
                card.dataset.uniqueIndex = index; // å”¯ä¸€ç´¢å¼•ï¼Œé˜²æ­¢ç‚¹åŒä¸€å¼ å¡
                card.innerHTML = `
                    <div class="card-inner">
                        <div class="card-front">
                            <div>${food.cn}</div>
                            <div>${food.en}</div>
                            <div>${food.pronunciation}</div>
                        </div>
                        <div class="card-back">ğŸ´</div>
                    </div>
                `;
                card.addEventListener('click', flipCard);
                memoryGame.appendChild(card);
                cards.push(card);
            });

            // å¯åŠ¨è®¡æ—¶å™¨
            timerInterval = setInterval(() => {
                timer--;
                updateTimer();
                if (timer <= 0) {
                    clearInterval(timerInterval);
                    alert(`æ—¶é—´åˆ°ï¼ç¬¬ä¸€å…³ç»“æŸï¼Œä½ çš„å¾—åˆ†æ˜¯ï¼š${score}`);
                }
            }, 1000);
        }

        // æ›´æ–°è®¡æ—¶å™¨æ˜¾ç¤º
        function updateTimer() {
            const minutes = Math.floor(timer / 60);
            const seconds = timer % 60;
            document.querySelector('#level1 .timer').textContent = `è®¡æ—¶ï¼š${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // ç¿»å¡ç‰‡é€»è¾‘ï¼ˆé˜²é‡å¤ç‚¹å‡»ã€é˜²åŒä¸€å¼ å¡ï¼‰
        function flipCard() {
            // ç¦æ­¢æ¡ä»¶ï¼šå·²ç¿»2å¼ ã€å½“å‰å¡å·²ç¿»ã€ç‚¹çš„æ˜¯åŒä¸€å¼ å¡
            if (flippedCards.length >= 2 || 
                this.classList.contains('flip') || 
                (flippedCards.length === 1 && flippedCards[0].dataset.uniqueIndex === this.dataset.uniqueIndex)) {
                return;
            }
            
            this.classList.add('flip');
            flippedCards.push(this);

            // ç¿»å¤Ÿä¸¤å¼ æ‰æ£€æŸ¥åŒ¹é…
            if (flippedCards.length === 2) {
                setTimeout(checkMatch, 500); // å»¶è¿Ÿï¼Œè®©ç©å®¶çœ‹åˆ°ç¬¬äºŒå¼ å¡
            }
        }

        // æ£€æŸ¥å¡ç‰‡åŒ¹é…ï¼ˆæ ¸å¿ƒä¿®å¤ï¼šæ±‰å ¡åŒ¹é…100%æ­£ç¡®ï¼‰
        function checkMatch() {
            const [card1, card2] = flippedCards;
            // åŒ¹é…æ¡ä»¶ï¼šè‹±æ–‡å•è¯ç›¸åŒ + ä¸æ˜¯åŒä¸€å¼ å¡
            const isMatch = card1.dataset.foodEn === card2.dataset.foodEn && 
                            card1.dataset.uniqueIndex !== card2.dataset.uniqueIndex;

            if (isMatch) {
                // åŒ¹é…æˆåŠŸ
                score += 1;
                document.querySelector('#level1 .score').textContent = `å¾—åˆ†ï¼š${score}`;
                // ç§»é™¤ç‚¹å‡»äº‹ä»¶ï¼Œé˜²æ­¢é‡å¤ç¿»
                card1.removeEventListener('click', flipCard);
                card2.removeEventListener('click', flipCard);
                flippedCards = [];
            } else {
                // åŒ¹é…å¤±è´¥ï¼Œç¿»å›å»å¹¶æç¤º
                setTimeout(() => {
                    card1.classList.remove('flip');
                    card2.classList.remove('flip');
                    flippedCards = [];
                    // æç¤ºæ­£ç¡®å•è¯ï¼ˆæ‰¾å¯¹åº”ç¾é£Ÿæ•°æ®ï¼‰
                    const foodItem = foodData.find(f => f.en.toLowerCase() === card1.dataset.foodEn);
                    alert(`ç­”é”™å•¦ï¼æ­£ç¡®å•è¯æ˜¯ï¼š${foodItem.en} ${foodItem.pronunciation}ï¼Œè¯·è·Ÿè¯»3éï½`);
                }, 800);
            }
        }

        // ===================== ç¬¬äºŒå…³ï¼šæ‹¼å†™æŒ‘æˆ˜ï¼ˆå•è¯æ‹¼å†™100%æ­£ç¡®ï¼‰ =====================
        const spellingWord = document.getElementById('spellingWord');
        const spellingInput = document.getElementById('spellingInput');
        const checkBtn = document.getElementById('checkBtn');
        const nextBtn = document.getElementById('nextBtn');
        const spellingFeedback = document.getElementById('spellingFeedback');
        let currentWordIndex = 0;
        let spellingScore = 0;
        let remainingWords = 8;
        let selectedWords = [];

        // åˆå§‹åŒ–æ‹¼å†™æ¸¸æˆ
        function initSpellingGame() {
            // éšæœºé€‰8ä¸ªä¸é‡å¤çš„å•è¯
            selectedWords = [...foodData].sort(() => Math.random() - 0.5).slice(0, 8);
            currentWordIndex = 0;
            spellingScore = 0;
            remainingWords = 8;
            document.querySelector('#level2 .score').textContent = `å½“å‰å¾—åˆ†ï¼š0`;
            document.querySelector('#level2 .score-panel div:last-child').textContent = `å‰©ä½™å•è¯ï¼š8`;
            spellingFeedback.textContent = '';
            spellingInput.disabled = false;
            checkBtn.disabled = false;
            showCurrentSpellingWord();
        }

        // æ˜¾ç¤ºå½“å‰å•è¯
        function showCurrentSpellingWord() {
            if (currentWordIndex >= selectedWords.length) {
                spellingWord.textContent = 'æ‹¼å†™æŒ‘æˆ˜ç»“æŸï¼';
                spellingInput.disabled = true;
                checkBtn.disabled = true;
                alert(`æ‹¼å†™æŒ‘æˆ˜ç»“æŸï¼ä½ çš„æ€»åˆ†æ˜¯ï¼š${spellingScore}ï¼Œ${spellingScore >= 6 ? 'é€šå…³ï¼' : 'æœªé€šå…³ï¼Œå†è¯•è¯•ï½'}`);
                return;
            }
            spellingWord.textContent = `è¯·æ‹¼å†™ï¼š${selectedWords[currentWordIndex].cn}`;
            spellingInput.value = '';
            spellingFeedback.textContent = '';
        }

        // æ£€æŸ¥æ‹¼å†™ç­”æ¡ˆï¼ˆæ ¸å¿ƒï¼šæ±‰å ¡æ‹¼å†™ä¸¥æ ¼åŒ¹é…ï¼‰
        function checkSpelling() {
            const userAnswer = spellingInput.value.trim().toLowerCase();
            const correctAnswer = selectedWords[currentWordIndex].en.toLowerCase();
            
            // ä¸¥æ ¼åŒ¹é…ï¼šåŒºåˆ†ç©ºæ ¼ï¼ˆå¦‚ fried chickenã€French friesï¼‰
            if (userAnswer === correctAnswer) {
                spellingScore += 1;
                spellingFeedback.textContent = `âœ… æ­£ç¡®ï¼${selectedWords[currentWordIndex].cn} = ${correctAnswer}`;
                spellingFeedback.className = 'feedback correct';
            } else if (userAnswer.length > 0 && correctAnswer.includes(userAnswer) && userAnswer.length >= correctAnswer.length - 1) {
                // éƒ¨åˆ†æ­£ç¡®ï¼ˆå·®1ä¸ªå­—æ¯ï¼‰
                spellingScore += 0.5;
                spellingFeedback.textContent = `âš ï¸ æ¥è¿‘å•¦ï¼æ­£ç¡®æ‹¼å†™æ˜¯ï¼š${correctAnswer}`;
                spellingFeedback.className = 'feedback wrong';
            } else {
                spellingFeedback.textContent = `âŒ é”™è¯¯ï¼æ­£ç¡®æ‹¼å†™æ˜¯ï¼š${correctAnswer}`;
                spellingFeedback.className = 'feedback wrong';
            }
            // æ›´æ–°å¾—åˆ†
            document.querySelector('#level2 .score').textContent = `å½“å‰å¾—åˆ†ï¼š${spellingScore}`;
        }

        // ä¸‹ä¸€ä¸ªå•è¯
        function nextSpellingWord() {
            currentWordIndex++;
            remainingWords--;
            document.querySelector('#level2 .score-panel div:last-child').textContent = `å‰©ä½™å•è¯ï¼š${remainingWords}`;
            showCurrentSpellingWord();
        }

        // ===================== ç¬¬ä¸‰å…³ï¼šè¶£å‘³é—®ç­”ï¼ˆæ±‰å ¡æ‹¼å†™é—®ç­”ä¿®æ­£ï¼‰ =====================
        const quizQuestion = document.getElementById('quizQuestion');
        const quizAnswer = document.getElementById('quizAnswer');
        const quizCheckBtn = document.getElementById('quizCheckBtn');
        const quizNextBtn = document.getElementById('quizNextBtn');
        const quizFeedback = document.getElementById('quizFeedback');
        const congrats = document.getElementById('congrats');
        let currentQuizIndex = 0;
        let quizScore = 0;

        // åˆå§‹åŒ–é—®ç­”æ¸¸æˆ
        function initQuizGame() {
            currentQuizIndex = 0;
            quizScore = 0;
            document.querySelector('#level3 .score').textContent = `é—®ç­”å¾—åˆ†ï¼š0`;
            quizFeedback.textContent = '';
            congrats.classList.remove('active');
            quizAnswer.disabled = false;
            quizCheckBtn.disabled = false;
            showCurrentQuizQuestion();
        }

        // æ˜¾ç¤ºå½“å‰é—®é¢˜
        function showCurrentQuizQuestion() {
            if (currentQuizIndex >= quizQuestions.length) {
                quizQuestion.textContent = 'é—®ç­”æŒ‘æˆ˜ç»“æŸï¼';
                quizAnswer.disabled = true;
                quizCheckBtn.disabled = true;
                alert(`é—®ç­”æŒ‘æˆ˜ç»“æŸï¼ä½ çš„æ€»åˆ†æ˜¯ï¼š${quizScore}ï¼Œ${quizScore >= 5 ? 'é€šå…³ï¼' : 'æœªé€šå…³ï¼Œå†è¯•è¯•ï½'}`);
                return;
            }
            quizQuestion.textContent = quizQuestions[currentQuizIndex].question;
            quizAnswer.value = '';
            quizFeedback.textContent = '';
        }

        // æ£€æŸ¥é—®ç­”ç­”æ¡ˆï¼ˆä¿®å¤æ±‰å ¡æ‹¼å†™é—®ç­”ï¼‰
        function checkQuizAnswer() {
            const userAnswer = quizAnswer.value.trim();
            if (!userAnswer) {
                quizFeedback.textContent = `âŒ è¯·è¾“å…¥ç­”æ¡ˆåæäº¤ï¼`;
                quizFeedback.className = 'quiz-feedback wrong';
                return;
            }

            const currentQ = quizQuestions[currentQuizIndex];
            const isCorrect = currentQ.check(userAnswer);
            
            if (isCorrect) {
                quizScore += 1;
                quizFeedback.textContent = `âœ… å›ç­”æ­£ç¡®ï¼åŠ 1åˆ†`;
                quizFeedback.className = 'quiz-feedback correct';
            } else {
                quizScore = Math.max(0, quizScore - 0.5); // æ‰£åˆ†ä¸ä½äº0
                quizFeedback.textContent = `âŒ å›ç­”é”™è¯¯ï¼æ‰£0.5åˆ†${currentQ.answer ? 'ï¼Œæ­£ç¡®ç­”æ¡ˆæ˜¯ï¼š' + currentQ.answer : ''}`;
                quizFeedback.className = 'quiz-feedback wrong';
            }

            // æ›´æ–°å¾—åˆ†
            document.querySelector('#level3 .score').textContent = `é—®ç­”å¾—åˆ†ï¼š${quizScore}`;
            
            // æ£€æŸ¥é€šå…³
            if (quizScore >= 5) {
                congrats.classList.add('active');
            }
        }

        // ä¸‹ä¸€ä¸ªé—®é¢˜
        function nextQuizQuestion() {
            currentQuizIndex++;
            showCurrentQuizQuestion();
        }

        // ===================== ç»‘å®šäº‹ä»¶ + åˆå§‹åŒ–æ‰€æœ‰å…³å¡ =====================
        // ç¬¬ä¸€å…³
        initMemoryGame();

        // ç¬¬äºŒå…³äº‹ä»¶ç»‘å®š
        checkBtn.addEventListener('click', checkSpelling);
        nextBtn.addEventListener('click', nextSpellingWord);
        initSpellingGame();

        // ç¬¬ä¸‰å…³äº‹ä»¶ç»‘å®š
        quizCheckBtn.addEventListener('click', checkQuizAnswer);
        quizNextBtn.addEventListener('click', nextQuizQuestion);
        initQuizGame();
    </script>
</body>
</html>
